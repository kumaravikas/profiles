(this["webpackJsonpexternal-embed"]=this["webpackJsonpexternal-embed"]||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var a,r,o,i,c,l,u,s=n(0),d=n.n(s),p=n(38),m=n.n(p),h=n(6),b=n(7),f=n(9),g=n(8),v=n(110),y=n(107),x=n(111),E=n(16),S=n(4),w=n(5),O=w.a.div(a||(a=Object(S.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  width: 100vw;\n  box-sizing: border-box;\n  text-align: center;\n  padding: 12px;\n  background-color: ",";\n"])),(function(e){return e.backgroundColor?e.backgroundColor:"#f3f4f6"})),_=w.a.div(r||(r=Object(S.a)(["\n  max-width: 28rem;\n  margin-left: auto;\n  margin-right: auto;\n"]))),j=w.a.div(o||(o=Object(S.a)(["\n  margin-bottom: 1.5rem;\n"]))),C=w.a.h2(i||(i=Object(S.a)(["\n  color: ",";\n  font-family: ",";\n  font-size: 28px;\n  line-height: 1;\n  margin-block: 0;\n  margin-bottom: 0.4;\n"])),(function(e){return e.textColor?e.textColor:"#000"}),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"})),k=w.a.p(c||(c=Object(S.a)(["\n  font-family: ",";\n  font-size: 14px;\n  font-weight: 400;\n  color: ",";\n"])),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"}),(function(e){return e.textColor?e.textColor:"#000"})),F=w.a.a(l||(l=Object(S.a)(["\n"]))),I=w.a.img(u||(u=Object(S.a)(["\n  position: absolute;\n  display: block;\n  right: 12px;\n  bottom: 12px;\n  max-height: 18px;\n  opacity: .3;\n  transition: all .25s ease-out;\n\n  :hover {\n    opacity: 1;\n  }\n"]))),T=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return d.a.createElement(F,{target:"_blank",href:this.props.targetUrl},d.a.createElement(I,{src:"/img/beehiiv-logo.png"}))}}]),n}(s.Component);T.defaultProps={targetUrl:"https://www.beehiiv.com"};var A,L=T,P=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return d.a.createElement(O,null,d.a.createElement(_,null,d.a.createElement(j,null,d.a.createElement(C,null,"Not found"),d.a.createElement(k,null,"Oops. We can't find what you're looking for."))),d.a.createElement(L,null))}}]),n}(s.Component),B=n(44),R=n(108),U=n(109),M=n(2),N=n.n(M),z=n(39),H=n.n(z),D=n(30),q=n.n(D),V=n(17),W=n(40),G=n.n(W),J=n(24),Q=w.a.div(A||(A=Object(S.a)(["\n  font-size: 42px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 20px;\n  color: ",";\n"])),(function(e){return e.color?e.color:"#000"})),Y=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return d.a.createElement(Q,{color:this.props.color},d.a.createElement(J.Dot,null,"."),d.a.createElement(J.Dot,null,"."),d.a.createElement(J.Dot,null,"."))}}]),n}(s.Component);Y.defaultProps={color:"#000"};var K,X,Z,$,ee,te,ne,ae,re,oe=Y,ie=d.a.createElement("svg",{viewBox:"0 0 24 24",stroke:"currentColor"},d.a.createElement("path",{d:"M9.5,18.2c-0.4,0.4-1,0.4-1.4,0l-3.8-3.8C4,14,4,13.4,4.3,13s1-0.4,1.4,0l3.1,3.1l8.6-8.6c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4 L9.5,18.2z"})),ce=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return d.a.createElement("div",{className:this.props.className},ie)}}]),n}(s.Component),le={"Content-Type":"application/json",Accept:"application/json"},ue=n(32),se=n(42),de=function(e){var t=e.name,n=e.category,a=e.action,r=e.label,o=void 0===r?window.location.href:r,i=e.value,c=void 0===i?0:i,l=e.data,u=void 0===l?{}:l;if("undefined"!==typeof window.dataLayer){var s=new Date;window.dataLayer.push({event:t,eventProps:Object(se.a)({category:n,action:a,label:o,value:c,timestamp:s.toISOString()},u)})}},pe=w.a.form(K||(K=Object(S.a)(["\n  margin-left: auto;\n  margin-right: auto;\n  display: flex;\n"]))),me=w.a.div(X||(X=Object(S.a)(["\n  width: 100%;\n"]))),he=w.a.label(Z||(Z=Object(S.a)(["\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n"]))),be=w.a.input($||($=Object(S.a)(["\n  -webkit-text-size-adjust: 100%;\n  tab-size: 4;\n  box-sizing: border-box;\n  border: 0 solid #e5e7eb;\n  font-family: ",";\n  margin: 0;\n  appearance: none;\n  background-color: rgba(255, 255, 255);\n  border-color: ",";\n  border-width: 2px;\n  display: block;\n  font-weight: 300;\n  font-size: 1rem;\n  line-height: 1.5rem;\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n  padding-left: 1.25rem;\n  padding-right: 1.25rem;\n  color: #000;\n  width: 100%;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 6px;\n  border-bottom-left-radius: 6px;\n\n  :focus {\n    outline: none;\n    box-shadow: none;\n  }\n"])),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"}),(function(e){return e.borderColor?e.borderColor:"rgb(61, 0, 223)"})),fe=w.a.div(ee||(ee=Object(S.a)(["\n  margin-top: 0;\n"]))),ge=w.a.div(te||(te=Object(S.a)(["\n  margin-top: 4px;\n"]))),ve=w.a.button(ne||(ne=Object(S.a)(["\n  white-space: pre;\n  appearance: button;\n  -webkit-text-size-adjust: 100%;\n  tab-size: 4;\n  box-sizing: border-box;\n  border: 0 solid #e5e7eb;\n  margin: 0;\n  font-family: ",";\n  background-color: ",";\n  color: ",";\n  border-color: transparent;\n  border-width: 1px;\n  cursor: pointer;\n  display: block;\n  font-weight: 500;\n  height: 100%;\n  font-size: 1rem;\n  line-height: 1.5rem;\n  min-width: 100px;\n  transition-property: background-color, border-color, color, fill, stroke,\n    opacity, box-shadow, transform, filter, backdrop-filter,\n    -webkit-backdrop-filter;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 0.2s;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  border-top-right-radius: 6px;\n  border-bottom-right-radius: 6px;\n  padding: 0 1rem;\n\n  :disabled {\n    opacity: 0.7;\n    cursor: default;\n  }\n"])),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"}),(function(e){return e.backgroundColor?e.backgroundColor:"rgb(61, 0, 223)"}),(function(e){return e.textColor?e.textColor:"#000"})),ye=w.a.p(ae||(ae=Object(S.a)(["\n  font-family: ",";\n  color: #ef4444;\n  font-size: 12px;\n"])),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"})),xe=Object(w.a)(ce)(re||(re=Object(S.a)(["\n  color: ",";\n  fill: ",";\n  width: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: -5px;\n"])),(function(e){return e.color?e.color:"#FFF"}),(function(e){return e.color?e.color:"#FFF"})),Ee=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t,n=e.target,r=n.value,o=n.name;a.updateState((t={},Object(V.a)(t,o,r),Object(V.a)(t,"error",null),t))},a.updateState=function(e){var t=Object.assign({},a.state,e);a.setState(t)},a.handleSubmit=function(e){e&&e.preventDefault();var t=a.state,n=t.captchaInteractionNeeded,r=t.captchaToken,o=t.captchaLoading,i=a.props.captchaEnabled;if(i&&n)a.updateState({captchaInteractionChallengeShowing:!0});else if(i&&!r&&o)a.updateState({isSubmitting:!0,captchaPrematurelySubmitted:!0});else{var c,l=a.props.successRedirectUrl,u=function(t){var n=a.props[t],r=function(t){if(null==t)return null;try{return decodeURIComponent(t)}catch(e){return t}};return Array.isArray(n)?r(n[0]):r(n)},s={external_embed_id:a.props.embedId,publication_id:a.props.publicationId,email:a.state.email,captcha_token:a.state.captchaToken,utm_source:u("utmSource"),utm_medium:u("utmMedium"),utm_campaign:u("utmCampaign"),referrer:u("referrer"),user_agent:a.props.userAgent};if(Object.keys(s).forEach((function(e){return null==s[e]&&delete s[e]})),s.email&&(!s.email||""!==s.email.trim()))a.updateState({isSubmitting:!0}),(c=s,ue.post("/api/submit",c,{headers:le})).then((function(e){var t,n;if(a.updateState({isSubmitted:!0}),de({name:"submittedEmail",category:"conversion",action:"submittedEmail",label:"embedded form",data:{email:a.state.email,utm_source:a.props.utmSource,utm_medium:a.props.utmMedium,utm_campaign:a.props.utmCampaign}}),l&&(null===(t=window)||void 0===t||null===(n=t.parent)||void 0===n?void 0:n.location)){var r=new URL(l),o=a.props.removeEmailFromRedirectUrl,i=e.data.subscription_id||null;o&&i?r.searchParams.set("sub_id",i):r.searchParams.set("email",a.state.email),window.parent.location.href=r.href}else{(window.top||window.parent||window).postMessage({type:"BEEHIIV_SUBSCRIBER_FORM_SUBMITTED",email:a.state.email,externalEmbedId:a.props.embedId},"*")}})).catch((function(e){if(403!==N()(e,"response","status")){var t=N()(e,"response","data","message")||"Something went wrong";a.updateState({error:t})}})).finally((function(){a.updateState({isSubmitting:!1})}))}},a.handleSubmitOnSuccessfulCaptchaInteraction=function(e){a.updateState({captchaToken:e,captchaInteractionChallengeShowing:!1,captchaPrematurelySubmitted:!1,captchaLoading:!1,captchaInteractionNeeded:!1})},a.handleResubmitWhenTokenGenerated=function(e){a.updateState({captchaToken:e,captchaPrematurelySubmitted:!1,captchaInteractionChallengeShowing:!1,captchaLoading:!1,captchaInteractionNeeded:!1})},a.handleSetToken=function(e){a.updateState({captchaToken:e,captchaLoading:!1})},a.handleResetCaptcha=function(){a.updateState({captchaToken:""}),window.turnstile.reset(a.props.embedId)},a.beehiivLink=function(){var e=a.props,t=e.embedId,n=e.publicationId;return"https://beehiiv.com?utm_source=external_embed&utm_content=".concat(t,"&publication_id=").concat(n)},a.isLocked=function(){return!!a.state.isSubmitted},a.renderForm=function(){var e=a.props,t=e.inputPlaceholder,n=e.buttonText,r=e.successMessageText,o=e.config,i=e.captchaEnabled,c=e.embedId,l=e.isSlim,u=a.state,s=u.isSubmitting,p=u.isSubmitted,m=u.error,h=u.captchaInteractionChallengeShowing,b=u.captchaToken,f=N()(o,"button_color"),g=N()(o,"button_text_color"),v=N()(o,"body_font"),y=N()(o,"text_color"),x=N()(o,"button_font"),E=a.isLocked(),S=i&&!b,w=h&&l;return r&&p?d.a.createElement(k,{textColor:y,fontFamily:v},r):d.a.createElement(d.a.Fragment,null,!w&&d.a.createElement(pe,{onSubmit:a.handleSubmit,captchaLoading:S},d.a.createElement(me,null,d.a.createElement(he,{htmlFor:"email"},"Email"),d.a.createElement(be,{borderColor:f,fontFamily:x,autoComplete:"email",placeholder:t||"Enter your email",onChange:a.handleChange,value:a.state.email,disabled:E,type:"email",name:"email",required:!0})),d.a.createElement(fe,null,d.a.createElement(ve,{backgroundColor:f,fontFamily:x,textColor:g,type:"submit",disabled:E},p?d.a.createElement(xe,{color:g}):s?d.a.createElement(oe,{color:g}):n))),m&&d.a.createElement(ye,{fontFamily:v},m),i&&d.a.createElement(ge,null,d.a.createElement(G.a,{widgetId:c,sitekey:"0x4AAAAAAAEd9Y5m2ti6x_A8",appearance:"interaction-only",style:{margin:w?"-12px":""},onLoad:function(){a.updateState({captchaLoading:!0})},onTimeout:function(){return a.handleResetCaptcha()},onExpire:function(){return a.handleResetCaptcha()},theme:"auto",size:"normal",onVerify:function(e){var t=a.state,n=t.captchaPrematurelySubmitted;t.captchaInteractionNeeded&&e?a.handleSubmitOnSuccessfulCaptchaInteraction(e):n&&e?a.handleResubmitWhenTokenGenerated(e):a.handleSetToken(e)}})))},a.state={isSubmitting:!1,isSubmitted:!1,email:"",error:null,captchaToken:"",captchaInteractionNeeded:!1,captchaLoading:!1,captchaPrematurelySubmitted:!1,captchaInteractionChallengeShowing:!1},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.header,n=e.description,a=e.config,r=e.isSlim,o=e.isBeehiivBranded,i=N()(a,"background_color"),c=N()(a,"text_color"),l=N()(a,"header_font"),u=N()(a,"body_font");return r?this.renderForm():d.a.createElement(O,{backgroundColor:i},d.a.createElement(_,null,d.a.createElement(j,null,d.a.createElement(C,{textColor:c,fontFamily:l},t),d.a.createElement(k,{textColor:c,fontFamily:u},n)),this.renderForm()),o?d.a.createElement(L,{targetUrl:this.beehiivLink()}):null)}}]),n}(s.Component);Ee.defaultProps={isSlim:!1};var Se=Ee,we=n(32),Oe=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).setupMutationObserver=function(){var e=document.body;a.observer=new MutationObserver((function(e){var t,n=Object(B.a)(e);try{for(n.s();!(t=n.n()).done;){var r,o=t.value;if("attributes"===o.type&&"px-captcha-modal"===(null===(r=o.target)||void 0===r?void 0:r.id)){var i=o.target.contentDocument;Array.from(i.getElementsByClassName("px-captcha-message")).forEach((function(e){return e.setAttribute("style","display:none")})),Array.from(i.getElementsByClassName("px-captcha-header")).forEach((function(e){return e.setAttribute("style","display:none")})),Array.from(i.getElementsByClassName("px-captcha-report")).forEach((function(e){return e.setAttribute("style","display:none")})),Array.from(i.getElementsByClassName("px-captcha-refid")).forEach((function(e){return e.setAttribute("style","display:none")})),Array.from(i.getElementsByClassName("px-captcha-container")).forEach((function(e){return e.setAttribute("style","height:50px")})),a.observer.disconnect()}}}catch(c){n.e(c)}finally{n.f()}})),a.observer.observe(e,{attributes:!0,childList:!0,subtree:!0})},a.addHumanScriptToHead=function(e){"true"===window.env.REACT_APP_HUMAN_ENABLED&&(a.humanScript=document.createElement("script"),a.humanScript.src=window.env.REACT_APP_HUMAN_URL,a.humanScript.async=!0,document.head.appendChild(a.humanScript),e&&(a.humanScript.onload=function(){window["_"+window._pxAppId]={challenge:{view:{texSize:12},translation:{default:{btn:"Press & Hold to confirm you're human"}}}}}),a.captchaScript=document.createElement("script"),a.captchaScript.innerHTML='\n          window._pxOnCaptchaSuccess = function (isValid) {\n          console.log("Captcha success", isValid);\n        };\n      ',document.head.appendChild(a.captchaScript))},a.removeHumanScriptFromHead=function(){a.humanScript&&document.head.removeChild(a.humanScript),a.captchaScript&&document.head.removeChild(a.captchaScript)},a.fetchExternalEmbed=function(){var e,t=a.props.match.params.embedId;a.updateState({isLoading:!0}),(e=t,we.get("/api/embeds/".concat(e),{headers:le})).then((function(e){var t=N()(e,"data"),n=N()(t,"publication_id"),r=N()(t,"header"),o=N()(t,"description"),i=N()(t,"input_placeholder"),c=N()(t,"button_text"),l=N()(t,"success_message_text"),u=N()(t,"success_redirect_url"),s=N()(t,"config"),d=N()(t,"captcha_enabled"),p=N()(t,"beehiiv_branded"),m=N()(t,"remove_email_from_redirect_url"),h=Object.assign({},a.state.config,s),b=a.fontsToLoad(h);a.updateState({publicationId:n,header:r,description:o,inputPlaceholder:i,buttonText:c,successMessageText:l,successRedirectUrl:u,config:h,requiredFonts:b,captchaEnabled:d,isBeehiivBranded:p,removeEmailFromRedirectUrl:m})})).catch((function(e){var t=N()(e,"response","status"),n=N()(e,"response","data","message")||"Something went wrong";a.updateState({isNotFound:404===t,error:n})})).finally((function(){a.updateState({isLoading:!1})}))},a.updateState=function(e){var t=Object.assign({},a.state,e);a.setState(t)},a.fontsToLoad=function(e){var t=N()(e,"header_font"),n=N()(e,"body_font"),a=N()(e,"button_font"),r=[];return t&&"Open Sans"!==t&&!r.includes(t)&&r.push(t),n&&"Open Sans"!==n&&!r.includes(n)&&r.push(n),a&&"Open Sans"!==a&&!r.includes(a)&&r.push(a),r},a.state={isLoading:!1,isNotFound:!1,error:null,publicationId:null,header:null,description:null,inputPlaceholder:null,buttonText:null,successMessageText:null,successRedirectUrl:null,captchaEnabled:!1,config:{body_font:"Poppins",button_font:"Open Sans",header_font:"Poppins",button_color:"#62FF2B",background_color:"#62ECFF",text_color:"#000",button_text_color:"#000"},requiredFonts:[],isBeehiivBranded:!1,removeEmailFromRedirectUrl:!1},a.humanScript=null,a.observer=null,a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.location.search,t=!!q.a.parse(e,{ignoreQueryPrefix:!0}).slim;this.fetchExternalEmbed(),this.addHumanScriptToHead(t),t&&this.setupMutationObserver()}},{key:"componentWillUnmount",value:function(){this.removeHumanScriptFromHead(),this.observer&&this.observer.disconnect()}},{key:"render",value:function(){var e,t,n=this.props,a=n.location.search,r=n.match.params.embedId,o=q.a.parse(a,{ignoreQueryPrefix:!0}),i=!!o.slim,c=null===o||void 0===o?void 0:o.utm_source,l=null===o||void 0===o?void 0:o.utm_campaign,u=null===o||void 0===o?void 0:o.utm_medium,s=null===o||void 0===o?void 0:o.referrer,p=null===(e=window)||void 0===e||null===(t=e.navigator)||void 0===t?void 0:t.userAgent,m=this.state,h=m.isLoading,b=m.isNotFound,f=m.publicationId,g=m.header,v=m.description,y=m.inputPlaceholder,x=m.buttonText,E=m.successMessageText,S=m.successRedirectUrl,w=m.config,O=m.requiredFonts,_=m.captchaEnabled,j=m.isBeehiivBranded,C=m.removeEmailFromRedirectUrl;if(b)return d.a.createElement(R.a,{to:"/not-found"});if(h)return null;var k=O.map((function(e){return{font:e,weights:[400,700]}}));return d.a.createElement(d.a.Fragment,null,k.length>0&&d.a.createElement(H.a,{fonts:k}),d.a.createElement(Se,{embedId:r,publicationId:f,header:g,description:v,inputPlaceholder:y,buttonText:x,successMessageText:E,successRedirectUrl:S,config:w,isSlim:i,utmSource:c,utmMedium:u,utmCampaign:l,referrer:s,userAgent:p,captchaEnabled:_,isBeehiivBranded:j,removeEmailFromRedirectUrl:C}))}}]),n}(s.Component),_e=Object(U.a)(Oe),je=Object(E.a)(),Ce=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return d.a.createElement(d.a.Fragment,null,d.a.createElement(x.a,{history:je},d.a.createElement(v.a,null,d.a.createElement(y.a,{exact:!0,path:"/not-found",component:P}),d.a.createElement(y.a,{exact:!0,path:"/:embedId",component:_e}),d.a.createElement(y.a,{component:P}))))}}]),n}(s.Component);m.a.render(d.a.createElement(Ce,null),document.getElementById("root"))},49:function(e,t,n){e.exports=n(105)},66:function(e,t){}},[[49,1,2]]]);